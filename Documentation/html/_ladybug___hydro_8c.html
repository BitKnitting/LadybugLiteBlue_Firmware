<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>Ladybug_Blue_Lite_Firmware: src/Ladybug_Hydro.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Ladybug_Blue_Lite_Firmware
   &#160;<span id="projectnumber">0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_ladybug___hydro_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">Ladybug_Hydro.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Handles pH and EC mV readings from the AIN and to/from Flash as needed by the client.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;string.h&quot;</code><br />
<code>#include &quot;nrf_gpio.h&quot;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &quot;app_error.h&quot;</code><br />
<code>#include &quot;softdevice_handler.h&quot;</code><br />
<code>#include &quot;ble_advertising.h&quot;</code><br />
<code>#include &quot;<a class="el" href="_ladybug__flash_8h_source.html">Ladybug_flash.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_ladybug___a_d_c_8h_source.html">Ladybug_ADC.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_ladybug___hydro_8h_source.html">Ladybug_Hydro.h</a>&quot;</code><br />
<code>#include &quot;pstorage.h&quot;</code><br />
<code>#include &quot;SEGGER_RTT.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for Ladybug_Hydro.c:</div>
<div class="dyncontent">
<div class="center"><img src="_ladybug___hydro_8c__incl.png" border="0" usemap="#src_2_ladybug___hydro_8c" alt=""/></div>
<map name="src_2_ladybug___hydro_8c" id="src_2_ladybug___hydro_8c">
<area shape="rect" id="node9" href="_ladybug__flash_8h.html" title="Ladybug_flash.h" alt="" coords="979,80,1099,107"/>
<area shape="rect" id="node11" href="_ladybug___hydro_8h.html" title="identifies the typedefs macros used for reading and packing hydro values (i.e.: the mV from the AINs ..." alt="" coords="1055,155,1181,181"/>
<area shape="rect" id="node13" href="_ladybug___a_d_c_8h.html" title="Ladybug_ADC.h" alt="" coords="784,80,904,107"/>
</map>
</div>
</div>
<p><a href="_ladybug___hydro_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:adc2a12272dec562832081b9df7963276"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_ladybug___hydro_8c.html#adc2a12272dec562832081b9df7963276">EC_VIN_FET</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:adc2a12272dec562832081b9df7963276"><td class="mdescLeft">&#160;</td><td class="mdescRight">mapping the FET pins to the schematic  <a href="#adc2a12272dec562832081b9df7963276">More...</a><br /></td></tr>
<tr class="separator:adc2a12272dec562832081b9df7963276"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e796f5ea1dd794de6eb0d633c936826"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_ladybug___hydro_8c.html#a2e796f5ea1dd794de6eb0d633c936826">EC_VOUT_FET</a>&#160;&#160;&#160;7</td></tr>
<tr class="separator:a2e796f5ea1dd794de6eb0d633c936826"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a5310b84fbe5b55ff17ca16cde0e36cb9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_ladybug___hydro_8c.html#a5310b84fbe5b55ff17ca16cde0e36cb9">ladybug_get_plantInfo</a> (<a class="el" href="structplant_info__t.html">plantInfo_t</a> **p_plantInfo)</td></tr>
<tr class="memdesc:a5310b84fbe5b55ff17ca16cde0e36cb9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the plant type and stage stored in flash. If a write check has not been written, then set the plant type and stage to default strings.  <a href="#a5310b84fbe5b55ff17ca16cde0e36cb9">More...</a><br /></td></tr>
<tr class="separator:a5310b84fbe5b55ff17ca16cde0e36cb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a345675bc7383860703617f7d371d4696"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_ladybug___hydro_8c.html#a345675bc7383860703617f7d371d4696">ladybug_update_calibration_value</a> (<a class="el" href="_ladybug___hydro_8h.html#a1cd0c0d0f5120d097e20d97f58af539e">control_enum_t</a> command, int solutionValue)</td></tr>
<tr class="memdesc:a345675bc7383860703617f7d371d4696"><td class="mdescLeft">&#160;</td><td class="mdescRight">the central has requested calibrating either the pH or EC probe. First decide what calibration solution the probe is in. This could be a pH4, pH7, EC1, or EC2 calibration solution. Calculating the pH and EC happens on the client. In this function the mV readings for the AINs associated with what is being calibrated is read and stored into flash. EC readings will also store the calibration solution value used that would be the reading if the EC probe was "ideal"  <a href="#a345675bc7383860703617f7d371d4696">More...</a><br /></td></tr>
<tr class="separator:a345675bc7383860703617f7d371d4696"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04d32ef05750b7ace4ca2ca322ea9599"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_ladybug___hydro_8c.html#a04d32ef05750b7ace4ca2ca322ea9599">ladybug_undo_pH_calibration</a> (<a class="el" href="_ladybug___hydro_8h.html#a1cd0c0d0f5120d097e20d97f58af539e">control_enum_t</a> command, int16_t pHCalValue)</td></tr>
<tr class="memdesc:a04d32ef05750b7ace4ca2ca322ea9599"><td class="mdescLeft">&#160;</td><td class="mdescRight">OOps! The central wants the last value stored for a pH calibration measurement.  <a href="#a04d32ef05750b7ace4ca2ca322ea9599">More...</a><br /></td></tr>
<tr class="separator:a04d32ef05750b7ace4ca2ca322ea9599"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0783c1508be60cfe95be54238b055b1e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_ladybug___hydro_8c.html#a0783c1508be60cfe95be54238b055b1e">ladybug_undo_EC_calibration</a> (<a class="el" href="_ladybug___hydro_8h.html#a1cd0c0d0f5120d097e20d97f58af539e">control_enum_t</a> command, int16_t EC_Vin, int16_t EC_Vout)</td></tr>
<tr class="memdesc:a0783c1508be60cfe95be54238b055b1e"><td class="mdescLeft">&#160;</td><td class="mdescRight">OOps! The central wants the last value stored for either EC1 or EC2 calibration measurement.  <a href="#a0783c1508be60cfe95be54238b055b1e">More...</a><br /></td></tr>
<tr class="separator:a0783c1508be60cfe95be54238b055b1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38ac14326e802229f4e0627c798ad8f2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_ladybug___hydro_8c.html#a38ac14326e802229f4e0627c798ad8f2">ladybug_reset_calibration_values</a> (<a class="el" href="_ladybug___hydro_8h.html#a1cd0c0d0f5120d097e20d97f58af539e">control_enum_t</a> command)</td></tr>
<tr class="memdesc:a38ac14326e802229f4e0627c798ad8f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">a request has come in from the client to reset either the pH or EC calibration values  <a href="#a38ac14326e802229f4e0627c798ad8f2">More...</a><br /></td></tr>
<tr class="separator:a38ac14326e802229f4e0627c798ad8f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afff0e97016d886f457fdaa5fb5822624"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_ladybug___hydro_8c.html#afff0e97016d886f457fdaa5fb5822624">ladybug_get_calibrationValues</a> (<a class="el" href="structcalibration_values__t.html">calibrationValues_t</a> **p_calibrationValues)</td></tr>
<tr class="separator:afff0e97016d886f457fdaa5fb5822624"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1e6ed8ed8b17b1a8a2dce1e48435431"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_ladybug___hydro_8c.html#ac1e6ed8ed8b17b1a8a2dce1e48435431">ladybug_get_measurements</a> (<a class="el" href="structmeasurements__t.html">measurements_t</a> **p_measurements)</td></tr>
<tr class="memdesc:ac1e6ed8ed8b17b1a8a2dce1e48435431"><td class="mdescLeft">&#160;</td><td class="mdescRight">get pH and EC readings and return a pointer to the variable holding the measurements.  <a href="#ac1e6ed8ed8b17b1a8a2dce1e48435431">More...</a><br /></td></tr>
<tr class="separator:ac1e6ed8ed8b17b1a8a2dce1e48435431"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba27f18b899dc075bb565ce8a886cb5c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_ladybug___hydro_8c.html#aba27f18b899dc075bb565ce8a886cb5c">ladybug_get_calibration_values_memory_location</a> (<a class="el" href="structcalibration_values__t.html">calibrationValues_t</a> **p_calibrationValues)</td></tr>
<tr class="memdesc:aba27f18b899dc075bb565ce8a886cb5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function provides the memory location where the calibration values are stored. This way, using a global <a class="el" href="structcalibration_values__t.html" title="This struct sets up the mV readings measured for calibrating pH, EC1, or EC2. There is also room to s...">calibrationValues_t</a> struct is avoided.  <a href="#aba27f18b899dc075bb565ce8a886cb5c">More...</a><br /></td></tr>
<tr class="separator:aba27f18b899dc075bb565ce8a886cb5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50471f358500c0a227c9ab7cc1a64c28"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_ladybug___hydro_8c.html#a50471f358500c0a227c9ab7cc1a64c28">ladybug_there_are_calibration_values_to_write</a> (<a class="el" href="structstore_calibration_values__t.html">storeCalibrationValues_t</a> **p_storeCalibrationValues)</td></tr>
<tr class="separator:a50471f358500c0a227c9ab7cc1a64c28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2383d8c26da95e5ce2aae93436ad36b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_ladybug___hydro_8c.html#ae2383d8c26da95e5ce2aae93436ad36b">ladybug_there_are_plantInfo_values_to_write</a> (<a class="el" href="structstore_plant_info__t.html">storePlantInfo_t</a> **p_storePlantInfo)</td></tr>
<tr class="separator:ae2383d8c26da95e5ce2aae93436ad36b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24ef7c4a5a45b3587d80540b7871cd4e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_ladybug___hydro_8c.html#a24ef7c4a5a45b3587d80540b7871cd4e">ladybug_the_device_name_has_been_updated</a> (char **p_deviceName)</td></tr>
<tr class="memdesc:a24ef7c4a5a45b3587d80540b7871cd4e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hides a flag that says the device name has been changed by the client and it needs to be stored in Flash.  <a href="#a24ef7c4a5a45b3587d80540b7871cd4e">More...</a><br /></td></tr>
<tr class="separator:a24ef7c4a5a45b3587d80540b7871cd4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab98babdac1ab1060ed5460b6fcb21b26"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_ladybug___hydro_8c.html#ab98babdac1ab1060ed5460b6fcb21b26">ladybug_get_device_name</a> (char **p_deviceName)</td></tr>
<tr class="separator:ab98babdac1ab1060ed5460b6fcb21b26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08a9499675a2e1b4211e3ce335da40c4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_ladybug___hydro_8c.html#a08a9499675a2e1b4211e3ce335da40c4">ladybug_write_device_name</a> (char *p_device_name, uint16_t len)</td></tr>
<tr class="memdesc:a08a9499675a2e1b4211e3ce335da40c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">write the device name the client has sent to flash. This could happen within the ble service code. For now I'm keeping flash writes for the Ladybug all within the ladybug code.  <a href="#a08a9499675a2e1b4211e3ce335da40c4">More...</a><br /></td></tr>
<tr class="separator:a08a9499675a2e1b4211e3ce335da40c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a592ecad22d91517a9f54bbb4d6080119"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_a_d_c__interface.html">ADC_interface</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_ladybug___hydro_8c.html#a592ecad22d91517a9f54bbb4d6080119">adc</a></td></tr>
<tr class="memdesc:a592ecad22d91517a9f54bbb4d6080119"><td class="mdescLeft">&#160;</td><td class="mdescRight">adc is an instance of the typedef'd structure that defines pointers to (static) functions. This way, folks can use a public name but not be directly calling the internal functions for interacting with the ADC.  <a href="#a592ecad22d91517a9f54bbb4d6080119">More...</a><br /></td></tr>
<tr class="separator:a592ecad22d91517a9f54bbb4d6080119"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Handles pH and EC mV readings from the AIN and to/from Flash as needed by the client. </p>
<dl class="section author"><dt>Author</dt><dd>Margaret Johnson </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0 </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>Take multiple measurements (e.g.: 2 mins) when reading calibration measurements, until readings converge. </dd></dl>

<p>Definition in file <a class="el" href="_ladybug___hydro_8c_source.html">Ladybug_Hydro.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="adc2a12272dec562832081b9df7963276"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EC_VIN_FET&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>mapping the FET pins to the schematic </p>

<p>Definition at line <a class="el" href="_ladybug___hydro_8c_source.html#l00034">34</a> of file <a class="el" href="_ladybug___hydro_8c_source.html">Ladybug_Hydro.c</a>.</p>

</div>
</div>
<a class="anchor" id="a2e796f5ea1dd794de6eb0d633c936826"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EC_VOUT_FET&#160;&#160;&#160;7</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_ladybug___hydro_8c_source.html#l00035">35</a> of file <a class="el" href="_ladybug___hydro_8c_source.html">Ladybug_Hydro.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="aba27f18b899dc075bb565ce8a886cb5c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ladybug_get_calibration_values_memory_location </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcalibration_values__t.html">calibrationValues_t</a> **&#160;</td>
          <td class="paramname"><em>p_calibrationValues</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function provides the memory location where the calibration values are stored. This way, using a global <a class="el" href="structcalibration_values__t.html" title="This struct sets up the mV readings measured for calibrating pH, EC1, or EC2. There is also room to s...">calibrationValues_t</a> struct is avoided. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_calibrationValues</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_ladybug___hydro_8c_source.html#l00273">273</a> of file <a class="el" href="_ladybug___hydro_8c_source.html">Ladybug_Hydro.c</a>.</p>

</div>
</div>
<a class="anchor" id="afff0e97016d886f457fdaa5fb5822624"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ladybug_get_calibrationValues </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcalibration_values__t.html">calibrationValues_t</a> **&#160;</td>
          <td class="paramname"><em>p_calibrationValues</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>read the calibration measurements for mV for pH4, pH7, EC1[2], and EC2[2], EC1solution, EC2solution from flash </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_calibrationValues</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_ladybug___hydro_8c_source.html#l00246">246</a> of file <a class="el" href="_ladybug___hydro_8c_source.html">Ladybug_Hydro.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="_ladybug___hydro_8c_afff0e97016d886f457fdaa5fb5822624_cgraph.png" border="0" usemap="#_ladybug___hydro_8c_afff0e97016d886f457fdaa5fb5822624_cgraph" alt=""/></div>
<map name="_ladybug___hydro_8c_afff0e97016d886f457fdaa5fb5822624_cgraph" id="_ladybug___hydro_8c_afff0e97016d886f457fdaa5fb5822624_cgraph">
<area shape="rect" id="node2" href="_s_e_g_g_e_r___r_t_t_8c.html#a48f49d4a8c91be7ca4ddf00c1f4e22c2" title="SEGGER_RTT_WriteString" alt="" coords="259,5,445,32"/>
<area shape="rect" id="node4" href="main_8c.html#a3b90614aaa1fdfe20ae38290f7411f22" title="flash_read" alt="" coords="310,56,394,83"/>
<area shape="rect" id="node3" href="_s_e_g_g_e_r___r_t_t_8c.html#aed26c0404eea08dc1c49c3420ce1348b" title="SEGGER_RTT_Write" alt="" coords="494,5,645,32"/>
<area shape="rect" id="node5" href="pstorage_8c.html#a99402440650cc2d2ee63d8866760a25b" title="pstorage_load" alt="" coords="516,56,623,83"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab98babdac1ab1060ed5460b6fcb21b26"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ladybug_get_device_name </td>
          <td>(</td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>p_deviceName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_ladybug___hydro_8c_source.html#l00313">313</a> of file <a class="el" href="_ladybug___hydro_8c_source.html">Ladybug_Hydro.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="_ladybug___hydro_8c_ab98babdac1ab1060ed5460b6fcb21b26_cgraph.png" border="0" usemap="#_ladybug___hydro_8c_ab98babdac1ab1060ed5460b6fcb21b26_cgraph" alt=""/></div>
<map name="_ladybug___hydro_8c_ab98babdac1ab1060ed5460b6fcb21b26_cgraph" id="_ladybug___hydro_8c_ab98babdac1ab1060ed5460b6fcb21b26_cgraph">
<area shape="rect" id="node2" href="_s_e_g_g_e_r___r_t_t_8c.html#a48f49d4a8c91be7ca4ddf00c1f4e22c2" title="SEGGER_RTT_WriteString" alt="" coords="433,5,618,32"/>
<area shape="rect" id="node4" href="main_8c.html#a3b90614aaa1fdfe20ae38290f7411f22" title="flash_read" alt="" coords="267,56,351,83"/>
<area shape="rect" id="node6" href="_s_e_g_g_e_r___r_t_t__printf_8c.html#a442758fd24cb811b92e67782f215bf5a" title="SEGGER_RTT_printf" alt="" coords="235,107,384,133"/>
<area shape="rect" id="node3" href="_s_e_g_g_e_r___r_t_t_8c.html#aed26c0404eea08dc1c49c3420ce1348b" title="SEGGER_RTT_Write" alt="" coords="667,56,818,83"/>
<area shape="rect" id="node5" href="pstorage_8c.html#a99402440650cc2d2ee63d8866760a25b" title="pstorage_load" alt="" coords="472,56,579,83"/>
<area shape="rect" id="node7" href="_s_e_g_g_e_r___r_t_t__printf_8c.html#af3b81398913b7f7df425208067caab38" title="SEGGER_RTT_vprintf" alt="" coords="447,107,603,133"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac1e6ed8ed8b17b1a8a2dce1e48435431"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ladybug_get_measurements </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmeasurements__t.html">measurements_t</a> **&#160;</td>
          <td class="paramname"><em>p_measurements</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>get pH and EC readings and return a pointer to the variable holding the measurements. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_measurements</td><td>used to return a pointer to the variable holding the measurements. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_ladybug___hydro_8c_source.html#l00261">261</a> of file <a class="el" href="_ladybug___hydro_8c_source.html">Ladybug_Hydro.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="_ladybug___hydro_8c_ac1e6ed8ed8b17b1a8a2dce1e48435431_cgraph.png" border="0" usemap="#_ladybug___hydro_8c_ac1e6ed8ed8b17b1a8a2dce1e48435431_cgraph" alt=""/></div>
<map name="_ladybug___hydro_8c_ac1e6ed8ed8b17b1a8a2dce1e48435431_cgraph" id="_ladybug___hydro_8c_ac1e6ed8ed8b17b1a8a2dce1e48435431_cgraph">
<area shape="rect" id="node2" href="_s_e_g_g_e_r___r_t_t_8c.html#a48f49d4a8c91be7ca4ddf00c1f4e22c2" title="SEGGER_RTT_WriteString" alt="" coords="246,5,431,32"/>
<area shape="rect" id="node3" href="_s_e_g_g_e_r___r_t_t_8c.html#aed26c0404eea08dc1c49c3420ce1348b" title="SEGGER_RTT_Write" alt="" coords="481,5,631,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a5310b84fbe5b55ff17ca16cde0e36cb9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ladybug_get_plantInfo </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structplant_info__t.html">plantInfo_t</a> **&#160;</td>
          <td class="paramname"><em>p_plantInfo</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read the plant type and stage stored in flash. If a write check has not been written, then set the plant type and stage to default strings. </p>

<p>Definition at line <a class="el" href="_ladybug___hydro_8c_source.html#l00107">107</a> of file <a class="el" href="_ladybug___hydro_8c_source.html">Ladybug_Hydro.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="_ladybug___hydro_8c_a5310b84fbe5b55ff17ca16cde0e36cb9_cgraph.png" border="0" usemap="#_ladybug___hydro_8c_a5310b84fbe5b55ff17ca16cde0e36cb9_cgraph" alt=""/></div>
<map name="_ladybug___hydro_8c_a5310b84fbe5b55ff17ca16cde0e36cb9_cgraph" id="_ladybug___hydro_8c_a5310b84fbe5b55ff17ca16cde0e36cb9_cgraph">
<area shape="rect" id="node2" href="_s_e_g_g_e_r___r_t_t_8c.html#a48f49d4a8c91be7ca4ddf00c1f4e22c2" title="SEGGER_RTT_WriteString" alt="" coords="209,5,394,32"/>
<area shape="rect" id="node4" href="main_8c.html#a3b90614aaa1fdfe20ae38290f7411f22" title="flash_read" alt="" coords="259,56,343,83"/>
<area shape="rect" id="node3" href="_s_e_g_g_e_r___r_t_t_8c.html#aed26c0404eea08dc1c49c3420ce1348b" title="SEGGER_RTT_Write" alt="" coords="443,5,594,32"/>
<area shape="rect" id="node5" href="pstorage_8c.html#a99402440650cc2d2ee63d8866760a25b" title="pstorage_load" alt="" coords="465,56,572,83"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a38ac14326e802229f4e0627c798ad8f2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ladybug_reset_calibration_values </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_ladybug___hydro_8h.html#a1cd0c0d0f5120d097e20d97f58af539e">control_enum_t</a>&#160;</td>
          <td class="paramname"><em>command</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>a request has come in from the client to reset either the pH or EC calibration values </p>

<p>Definition at line <a class="el" href="_ladybug___hydro_8c_source.html#l00232">232</a> of file <a class="el" href="_ladybug___hydro_8c_source.html">Ladybug_Hydro.c</a>.</p>

</div>
</div>
<a class="anchor" id="a24ef7c4a5a45b3587d80540b7871cd4e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ladybug_the_device_name_has_been_updated </td>
          <td>(</td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>p_deviceName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Hides a flag that says the device name has been changed by the client and it needs to be stored in Flash. </p>
<dl class="section return"><dt>Returns</dt><dd>true if the device name has been updated over BLE. Otherwise, false </dd></dl>

<p>Definition at line <a class="el" href="_ladybug___hydro_8c_source.html#l00305">305</a> of file <a class="el" href="_ladybug___hydro_8c_source.html">Ladybug_Hydro.c</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="_ladybug___hydro_8c_a24ef7c4a5a45b3587d80540b7871cd4e_icgraph.png" border="0" usemap="#_ladybug___hydro_8c_a24ef7c4a5a45b3587d80540b7871cd4e_icgraph" alt=""/></div>
<map name="_ladybug___hydro_8c_a24ef7c4a5a45b3587d80540b7871cd4e_icgraph" id="_ladybug___hydro_8c_a24ef7c4a5a45b3587d80540b7871cd4e_icgraph">
<area shape="rect" id="node2" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="I think of main as providing initialization and BLE event handling. One of the event handlers is used..." alt="" coords="237,12,288,39"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a50471f358500c0a227c9ab7cc1a64c28"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ladybug_there_are_calibration_values_to_write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structstore_calibration_values__t.html">storeCalibrationValues_t</a> **&#160;</td>
          <td class="paramname"><em>p_storeCalibrationValues</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_ladybug___hydro_8c_source.html#l00280">280</a> of file <a class="el" href="_ladybug___hydro_8c_source.html">Ladybug_Hydro.c</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="_ladybug___hydro_8c_a50471f358500c0a227c9ab7cc1a64c28_icgraph.png" border="0" usemap="#_ladybug___hydro_8c_a50471f358500c0a227c9ab7cc1a64c28_icgraph" alt=""/></div>
<map name="_ladybug___hydro_8c_a50471f358500c0a227c9ab7cc1a64c28_icgraph" id="_ladybug___hydro_8c_a50471f358500c0a227c9ab7cc1a64c28_icgraph">
<area shape="rect" id="node2" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="I think of main as providing initialization and BLE event handling. One of the event handlers is used..." alt="" coords="256,12,307,39"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae2383d8c26da95e5ce2aae93436ad36b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ladybug_there_are_plantInfo_values_to_write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structstore_plant_info__t.html">storePlantInfo_t</a> **&#160;</td>
          <td class="paramname"><em>p_storePlantInfo</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_ladybug___hydro_8c_source.html#l00292">292</a> of file <a class="el" href="_ladybug___hydro_8c_source.html">Ladybug_Hydro.c</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="_ladybug___hydro_8c_ae2383d8c26da95e5ce2aae93436ad36b_icgraph.png" border="0" usemap="#_ladybug___hydro_8c_ae2383d8c26da95e5ce2aae93436ad36b_icgraph" alt=""/></div>
<map name="_ladybug___hydro_8c_ae2383d8c26da95e5ce2aae93436ad36b_icgraph" id="_ladybug___hydro_8c_ae2383d8c26da95e5ce2aae93436ad36b_icgraph">
<area shape="rect" id="node2" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="I think of main as providing initialization and BLE event handling. One of the event handlers is used..." alt="" coords="245,12,296,39"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0783c1508be60cfe95be54238b055b1e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ladybug_undo_EC_calibration </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_ladybug___hydro_8h.html#a1cd0c0d0f5120d097e20d97f58af539e">control_enum_t</a>&#160;</td>
          <td class="paramname"><em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>EC_Vin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>EC_Vout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>OOps! The central wants the last value stored for either EC1 or EC2 calibration measurement. </p>

<p>Definition at line <a class="el" href="_ladybug___hydro_8c_source.html#l00185">185</a> of file <a class="el" href="_ladybug___hydro_8c_source.html">Ladybug_Hydro.c</a>.</p>

</div>
</div>
<a class="anchor" id="a04d32ef05750b7ace4ca2ca322ea9599"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ladybug_undo_pH_calibration </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_ladybug___hydro_8h.html#a1cd0c0d0f5120d097e20d97f58af539e">control_enum_t</a>&#160;</td>
          <td class="paramname"><em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>pHCalValue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>OOps! The central wants the last value stored for a pH calibration measurement. </p>

<p>Definition at line <a class="el" href="_ladybug___hydro_8c_source.html#l00171">171</a> of file <a class="el" href="_ladybug___hydro_8c_source.html">Ladybug_Hydro.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="_ladybug___hydro_8c_a04d32ef05750b7ace4ca2ca322ea9599_cgraph.png" border="0" usemap="#_ladybug___hydro_8c_a04d32ef05750b7ace4ca2ca322ea9599_cgraph" alt=""/></div>
<map name="_ladybug___hydro_8c_a04d32ef05750b7ace4ca2ca322ea9599_cgraph" id="_ladybug___hydro_8c_a04d32ef05750b7ace4ca2ca322ea9599_cgraph">
<area shape="rect" id="node2" href="_s_e_g_g_e_r___r_t_t__printf_8c.html#a442758fd24cb811b92e67782f215bf5a" title="SEGGER_RTT_printf" alt="" coords="253,5,403,32"/>
<area shape="rect" id="node3" href="_s_e_g_g_e_r___r_t_t__printf_8c.html#af3b81398913b7f7df425208067caab38" title="SEGGER_RTT_vprintf" alt="" coords="451,5,607,32"/>
<area shape="rect" id="node4" href="_s_e_g_g_e_r___r_t_t_8c.html#aed26c0404eea08dc1c49c3420ce1348b" title="SEGGER_RTT_Write" alt="" coords="657,5,807,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a345675bc7383860703617f7d371d4696"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ladybug_update_calibration_value </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_ladybug___hydro_8h.html#a1cd0c0d0f5120d097e20d97f58af539e">control_enum_t</a>&#160;</td>
          <td class="paramname"><em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>solutionValue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>the central has requested calibrating either the pH or EC probe. First decide what calibration solution the probe is in. This could be a pH4, pH7, EC1, or EC2 calibration solution. Calculating the pH and EC happens on the client. In this function the mV readings for the AINs associated with what is being calibrated is read and stored into flash. EC readings will also store the calibration solution value used that would be the reading if the EC probe was "ideal" </p>

<p>Definition at line <a class="el" href="_ladybug___hydro_8c_source.html#l00128">128</a> of file <a class="el" href="_ladybug___hydro_8c_source.html">Ladybug_Hydro.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="_ladybug___hydro_8c_a345675bc7383860703617f7d371d4696_cgraph.png" border="0" usemap="#_ladybug___hydro_8c_a345675bc7383860703617f7d371d4696_cgraph" alt=""/></div>
<map name="_ladybug___hydro_8c_a345675bc7383860703617f7d371d4696_cgraph" id="_ladybug___hydro_8c_a345675bc7383860703617f7d371d4696_cgraph">
<area shape="rect" id="node2" href="_s_e_g_g_e_r___r_t_t__printf_8c.html#a442758fd24cb811b92e67782f215bf5a" title="SEGGER_RTT_printf" alt="" coords="240,5,389,32"/>
<area shape="rect" id="node5" href="_s_e_g_g_e_r___r_t_t_8c.html#a48f49d4a8c91be7ca4ddf00c1f4e22c2" title="SEGGER_RTT_WriteString" alt="" coords="438,56,623,83"/>
<area shape="rect" id="node3" href="_s_e_g_g_e_r___r_t_t__printf_8c.html#af3b81398913b7f7df425208067caab38" title="SEGGER_RTT_vprintf" alt="" coords="453,5,609,32"/>
<area shape="rect" id="node4" href="_s_e_g_g_e_r___r_t_t_8c.html#aed26c0404eea08dc1c49c3420ce1348b" title="SEGGER_RTT_Write" alt="" coords="673,31,823,57"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a08a9499675a2e1b4211e3ce335da40c4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ladybug_write_device_name </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>p_device_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>write the device name the client has sent to flash. This could happen within the ble service code. For now I'm keeping flash writes for the Ladybug all within the ladybug code. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_device_name</td><td>a pointer to the device name string of characters </td></tr>
    <tr><td class="paramname">len</td><td>the length of the device name string. The length cannot be greater than the max bytes allowed for the name. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_ladybug___hydro_8c_source.html#l00333">333</a> of file <a class="el" href="_ladybug___hydro_8c_source.html">Ladybug_Hydro.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a592ecad22d91517a9f54bbb4d6080119"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_a_d_c__interface.html">ADC_interface</a> adc</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>adc is an instance of the typedef'd structure that defines pointers to (static) functions. This way, folks can use a public name but not be directly calling the internal functions for interacting with the ADC. </p>

<p>Definition at line <a class="el" href="_ladybug___a_d_c_8c_source.html#l00095">95</a> of file <a class="el" href="_ladybug___a_d_c_8c_source.html">Ladybug_ADC.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="_ladybug___hydro_8c.html">Ladybug_Hydro.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
